// ==UserScript==
// @name         Rival Regions - BannedList
// @namespace    http://tampermonkey.net/
// @version      0.4
// @description  WorkPermit BannedList
// @author       KCSystem
// @match        http://rivalregions.com
// @grant        none
// @updateURL    https://raw.githubusercontent.com/Kytoh/MyBots/master/checkBanned
// ==/UserScript==


(function() {
    'use strict';
    var zNode       = document.createElement ('div');
    zNode.innerHTML = '<button title="CheckerBanned" class="btn" id="CheckerBanned-btn" type="button">CheckerBanned!</button>';

    zNode.setAttribute ('id', 'learner-container');
    zNode.setAttribute ('style', 'z-index:9999999;position:absolute;bottom:200px;color:white');
    document.body.appendChild (zNode);

        //--- Activate the newly added button.
    document.getElementById ("CheckerBanned-btn").addEventListener (
        "click", checkBann, false);

    function checkBann(){
    $.getJSON( "https://rawgit.com/Kytoh/MyBots/master/banned_list", function( data ) {
        var Bannedlist = data;

        $('#list_tbody > tr').each(function() {
            let user = $(this).attr('user');
            console.log(user);
            console.log(Bannedlist[user]);
            console.log(Bannedlist[user] !== "undefined");
            if(typeof Bannedlist[user] !== "undefined"){
                switch(Bannedlist[user].level){
                    case 0:
                        $(this).attr("style", "background:red");
                        $(this).find($(".list_request_region")).remove();
                        break;
                    case 1:
                        $(this).attr("style", "background:orange");
                        break;
                    case 2:
                        $(this).attr("style", "background:yellow");
                        break;
                    case 9:
                        $(this).attr("style", "background:grey");
                        break;
                }
                $(this).after(Bannedlist[user].reason);
            }else{
                $(this).attr("style", "background:green");
            }
        });
    });
    }
})();
